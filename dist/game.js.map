{"version":3,"sources":["SpaceControls.js","game.js","audio.js","controls.js","fog.js","lights.js","planet.js","ship.js","skybox.js"],"names":[],"mappings":";;AAAA,IAAM,OAAO,KAAK,EAAL,GAAQ,CAArB;;AAEA,IAAI,KAAJ,CAAU,SAAV,CAAoB,aAApB,GAAoC,UAAS,MAAT,EAA4B;AAC5D;;AAD4D,MAAX,MAAW,yDAAJ,EAAI;AAG5D,MAAI,SAAS,IAAI,GAAJ,CAAQ,MAAR,CAAe,MAAf,EAAuB;AAClC,WAAO,SAAS,cAAT,CAAwB,SAAxB,CAD2B;AAElC,WAAO,CAF2B;AAGlC,UAAM;AAH4B,GAAvB,CAAb;;AAMA,OAAK,QAAL,GAAgB,IAAK,UAAS,MAAT,EAAkB,IAAlB,EAAwB,KAAxB,EAA8B;AACjD,QAAI,gBAAgB,IAAI,MAAM,OAAV,EAApB;QACI,QAAQ,IAAI,MAAM,KAAV,EADZ;;AAGA,QAAI,cAAc,GAAlB;QACI,YAAY,KADhB;;AAGA,QAAI,OAAO,IAAI,MAAM,UAAV,EAAX;QACI,YAAY,EAAE,MAAM,KAAR,EAAe,OAAO,KAAtB,EAA6B,SAAS,KAAtC,EAA6C,MAAM,KAAnD;AACE,aAAO,CADT,EACY,KAAK,CADjB,EACoB,MAAK,CADzB,EADhB;QAGI,aAAa,IAAI,MAAM,OAAV,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,CAAxB,CAHjB;QAII,iBAAiB,IAAI,MAAM,OAAV,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,CAAxB,CAJrB;QAKI,UAAU,KALd;;AAOA,SAAK,gBAAL,CAAsB,EAAC,GAAG,CAAJ,EAAO,GAAG,CAAV,EAAa,GAAG,CAAhB,EAAtB;;AAEA,QAAI,QAAQ,IAAZ;QACI,SAAS,IADb;QAEI,cAAc,IAAI,MAAM,QAAV,EAFlB;QAGI,YAAY,IAAI,MAAM,QAAV,EAHhB;;AAKA,SAAK,QAAL,CAAc,CAAd,IAAmB,EAAnB;;AAEA,WAAO,GAAP,CAAW,IAAX;AACA,gBAAY,GAAZ,CAAiB,OAAO,SAAP,EAAjB;;AAEA,cAAU,QAAV,CAAmB,CAAnB,GAAuB,OAAO,IAA9B;AACA,cAAU,GAAV,CAAe,WAAf;;AAEA,aAAS,WAAT,CAAuB,KAAvB,EAA+B;AAC7B,UAAK,MAAM,OAAN,KAAkB,KAAvB,EAA+B;;AAE/B,UAAI,YAAY,MAAM,SAAN,IAAmB,MAAM,YAAzB,IAAyC,MAAM,YAAN,EAAzC,IAAiE,CAAjF;UACI,YAAY,MAAM,SAAN,IAAmB,MAAM,YAAzB,IAAyC,MAAM,YAAN,EAAzC,IAAiE,CADjF;;AAGA,gBAAU,QAAV,CAAmB,CAAnB,IAAwB,YAAY,KAApC;AACA,kBAAY,QAAZ,CAAqB,CAArB,IAA0B,YAAY,KAAtC;AACD;;AAED,aAAS,SAAT,CAAqB,KAArB,EAA6B;AAC3B,cAAS,MAAM,OAAf;AACE,aAAK,EAAL;AACA,aAAK,EAAL;;AACE,oBAAU,OAAV,GAAoB,IAApB;AACA;;AAEF,aAAK,EAAL;AACA,aAAK,EAAL;;AACE,oBAAU,IAAV,GAAiB,IAAjB;AACA;;AAEF,aAAK,EAAL;AACA,aAAK,EAAL;;AACE,oBAAU,IAAV,GAAiB,IAAjB;AACA;;AAEF,aAAK,EAAL;AACA,aAAK,EAAL;;AACE,oBAAU,KAAV,GAAkB,IAAlB;AACA;;AAEF,aAAK,EAAL;;AACE,cAAK,OAAL,EAAc;AACZ,mBAAO,mBAAP,CAA2B,EAAC,GAAG,CAAJ,EAAO,GAAG,CAAV,EAAa,GAAG,CAAC,GAAjB,EAA3B;AACD;AACD,oBAAU,KAAV;AACF;;AAEA,aAAK,EAAL;;AACE,uBAAa,GAAb;AACA;;AAEF,aAAK,EAAL;AACE,oBAAU,IAAV,GAAiB,CAAC,CAAlB;AACA;;AAEF,aAAK,EAAL;AACE,oBAAU,IAAV,GAAiB,CAAjB;AACA;AAtCJ;AAwCD;;AAED,aAAS,OAAT,CAAmB,KAAnB,EAA2B;AACzB,cAAQ,MAAM,OAAd;;AAEE,aAAK,EAAL;AACA,aAAK,EAAL;;AACE,oBAAU,OAAV,GAAoB,KAApB;AACA;;AAEF,aAAK,EAAL;AACA,aAAK,EAAL;;AACE,oBAAU,IAAV,GAAiB,KAAjB;AACA;;AAEF,aAAK,EAAL;AACA,aAAK,EAAL;;AACE,oBAAU,IAAV,GAAiB,KAAjB;AACA;;AAEF,aAAK,EAAL;AACA,aAAK,EAAL;;AACE,oBAAU,KAAV,GAAkB,KAAlB;AACA;;AAEF,aAAK,EAAL;;AACE,wBAAc,IAAd;AACA;;AAEF,aAAK,EAAL;AACA,aAAK,EAAL;AACE,oBAAU,IAAV,GAAiB,CAAjB;AACA;AA7BJ;AA+BD;;AAED,SAAK,SAAL,GAAiB,YAAY;AAC3B,aAAO,SAAP;AACD,KAFD;;AAIA,SAAK,YAAL,GAAoB,UAAS,SAAT,EAAmB;AACrC,gBAAU,GAAV,CAAc,CAAd,EAAgB,CAAhB,EAAkB,CAAC,CAAnB;AACA,WAAK,eAAL,CAAqB,SAArB;AACD,KAHD;;AAKA,SAAK,MAAL,GAAc,UAAS,KAAT,EAAgB;AAC5B,UAAI,UAAU,IAAI,MAAM,OAAV,EAAd;;AAEA,UAAK,MAAM,OAAN,KAAkB,KAAvB,EAA+B;;AAE/B,oBAAc,GAAd,CAAkB,CAAlB,EAAoB,CAApB,EAAsB,CAAtB;AACA,gBAAU,IAAV,GAAiB,UAAU,IAAV,GAAiB,IAAjB,GAAwB,CAAzC;AACA,cAAQ,SAAS,GAAjB;AACA,cAAQ,KAAK,GAAL,CAAS,KAAT,EAAgB,GAAhB,CAAR;;AAEA,UAAI,QAAQ,QAAQ,WAAR,GAAsB,OAAO,KAAzC;AACA,UAAI,UAAU,QAAQ,SAAtB;;AAEA,UAAG,UAAU,OAAb,EAAqB;AACnB,sBAAc,CAAd,GAAkB,CAAC,KAAnB;AACD;;AAED,UAAG,UAAU,IAAb,EAAkB;AAChB,sBAAc,CAAd,GAAkB,KAAlB;AACD;;AAED,UAAG,UAAU,IAAb,EAAkB;AAChB,sBAAc,CAAd,GAAkB,CAAC,KAAnB;AACD;;AAED,UAAG,UAAU,KAAb,EAAmB;AACjB,sBAAc,CAAd,GAAkB,KAAlB;AACD;;AAED,YAAM,CAAN,GAAU,YAAY,QAAZ,CAAqB,CAA/B;AACA,YAAM,CAAN,GAAU,UAAU,QAAV,CAAmB,CAA7B;AACA,YAAM,KAAN,GAAc,KAAd;;AAEA,WAAK,YAAL,CAAkB,KAAlB;;AAEA,oBAAc,eAAd,CAA8B,IAA9B;;AAEA,aAAO,mBAAP,CAA2B;AACxB,WAAG,cAAc,CAAd,GAAkB,EADG;AAExB,WAAG,cAAc,CAAd,GAAkB,EAFG;AAGxB,WAAG,cAAc,CAAd,GAAkB;AAHG,OAA3B;;AAMA,gBAAU,QAAV,CAAmB,IAAnB,CAAwB,OAAO,QAA/B;AACH,KA5CC;;AA8CF,aAAS,IAAT,CAAc,gBAAd,CAAgC,WAAhC,EAA6C,WAA7C,EAA0D,KAA1D;AACA,aAAS,IAAT,CAAc,gBAAd,CAAgC,SAAhC,EAA2C,SAA3C,EAAsD,KAAtD;AACA,aAAS,IAAT,CAAc,gBAAd,CAAgC,OAAhC,EAAyC,OAAzC,EAAkD,KAAlD;AAEC,GA/Ke,CA+Kb,KAAK,SAAL,EA/Ka,EA+KK,OAAO,SAAP,EA/KL,EA+KyB,MA/KzB,CAAhB;;AAiLA,MAAI,WAAW,KAAK,QAApB;;AAEA,OAAK,QAAL,GAAgB,GAAhB,CAAqB,KAAK,QAAL,CAAc,SAAd,EAArB;;AAEA,MAAI,wBAAwB,QAAxB,IACA,2BAA2B,QAD3B,IAEA,8BAA8B,QAFlC,EAE4C;;AAEtC,QAAI,UAAU,SAAS,IAAvB;;AAEA,SAAK,iBAAL,GAAyB,YAAW;AAClC,UAAI,SAAS,kBAAT,KAAgC,OAAhC,IACA,SAAS,qBAAT,KAAmC,OADnC,IAEA,SAAS,wBAAT,KAAsC,OAF1C,EAEoD;;AAEhD,iBAAS,OAAT,GAAmB,IAAnB;AACA,eAAO,KAAP,CAAa,OAAb;AAEH,OAPD,MAQK;;AAEH,iBAAS,OAAT,GAAmB,KAAnB;;AAEA,eAAO,KAAP,CAAa,MAAb;AACD;AAEF,KAhBD;AAkBL,GAxBD,MAyBK;AACH,YAAQ,IAAR,CAAa,wDAAb;AACD;;AAED,WAAS,gBAAT,CAA0B,mBAA1B,EAA+C,KAAK,iBAApD,EAAuE,KAAvE;AACA,WAAS,gBAAT,CAA0B,sBAA1B,EAAkD,KAAK,iBAAvD,EAA0E,KAA1E;AACA,WAAS,gBAAT,CAA0B,yBAA1B,EAAqD,KAAK,iBAA1D,EAA6E,KAA7E;;AAEA,OAAK,gBAAL,GAAwB,YAAW;AACjC,YAAQ,IAAR,CAAa,qBAAb;AACD,GAFD;;AAIA,WAAS,gBAAT,CAA0B,kBAA1B,EAA8C,KAAK,gBAAnD,EAAqE,KAArE;AACA,WAAS,gBAAT,CAA0B,qBAA1B,EAAiD,KAAK,gBAAtD,EAAwE,KAAxE;AACA,WAAS,gBAAT,CAA0B,wBAA1B,EAAoD,KAAK,gBAAzD,EAA2E,KAA3E;;AAEA,SAAO,KAAP,CAAa,gBAAb,CAA8B,OAA9B,EAAuC,YAAW;;AAEhD,YAAQ,kBAAR,GAA6B,QAAQ,kBAAR,IACA,QAAQ,qBADR,IAEA,QAAQ,wBAFrC;;AAIA,YAAQ,iBAAR,GAA4B,QAAQ,iBAAR,IACA,QAAQ,oBADR,IAEA,QAAQ,oBAFR,IAGA,QAAQ,uBAHpC;AAIA,QAAI,WAAW,IAAX,CAAgB,UAAU,SAA1B,CAAJ,EAA0C;;AAExC,UAAI,mBAAmB,SAAnB,gBAAmB,GAAW;AAC9B,YAAI,SAAS,iBAAT,KAA+B,OAA/B,IACA,SAAS,oBAAT,KAAkC,OADlC,IAEA,SAAS,oBAAT,KAAkC,OAFtC,EAE+C;;AAEvC,mBAAS,mBAAT,CAA6B,kBAA7B,EAAiD,gBAAjD;AACA,mBAAS,mBAAT,CAA6B,qBAA7B,EAAoD,gBAApD;AACA,kBAAQ,kBAAR;AACP;AACJ,OATD;;AAWA,eAAS,gBAAT,CAA0B,kBAA1B,EAA8C,gBAA9C,EAAgE,KAAhE;AACA,eAAS,gBAAT,CAA0B,qBAA1B,EAAiD,gBAAjD,EAAmE,KAAnE;;AAEA,cAAQ,iBAAR;AAED,KAlBD,MAmBI;AACF,cAAQ,kBAAR;AACD;AACJ,GAhCC;AAiCH,CAxQD;;;ACFA,IAAM,YAAY,WAAlB;;AAEA,IAAM,OAAO,IAAI,IAAI,KAAR,CAAc;AACzB,SAAO,KADkB;AAEzB,cAAY,IAFa;;AAIzB,WAAS;AACP,OAAG,CADI;AAEP,OAAG,CAFI;AAGP,OAAG;AAHI,GAJgB;;AAUzB,UAAQ;AACN,SAAK,KADC;AAEN,YAAQ;AAFF,GAViB;;AAezB,aAAW;AACP,UAAM,MAAM;AADL,GAfc;;AAmBzB,UAAQ,CAnBiB;AAoBzB,WAAS,CApBgB;;AAsBzB,cAAY,QAtBa;;AAwBzB,eAAa,yCAxBY;;AA0BzB,aAAW;AA1Bc,CAAd,CAAb;;AA6BA,KAAK,KAAL;;AAEA,IAAI,SAAS,KAAK,SAAL,EAAb;;AAGA,UAAU,KAAV;;;ACpCA,IAAM,QAAQ,IAAI,MAAM,aAAV,EAAd;AACA,IAAM,aAAa,IAAI,MAAM,KAAV,CAAgB,KAAhB,CAAnB;AACA,IAAM,YAAY,IAAI,MAAM,KAAV,CAAgB,KAAhB,CAAlB;AACA,IAAM,SAAS,KAAK,SAAL,EAAf;AACA,IAAM,SAAS,IAAI,MAAM,WAAV,EAAf;;AAEA,OAAO,GAAP,CAAW,KAAX;;AAEA,KAAK,GAAL,CAAS,UAAT;;AAEA,OAAO,IAAP,CAAY,oCAAZ,EACC,UAAS,WAAT,EAAqB;AACpB,aAAW,SAAX,CAAsB,WAAtB;AACD,aAAW,IAAX;AACA,CAJD,EAIG,UAAS,GAAT,EAAa,CAAE,CAJlB,EAIoB,UAAS,GAAT,EAAa;AAAC,UAAQ,GAAR,CAAa,mBAAb;AAAoC,CAJtE;;AAMA,OAAO,IAAP,CAAY,wBAAZ,EACA,UAAS,WAAT,EAAqB;AACnB,YAAU,SAAV,CAAoB,WAApB;AACA,YAAU,MAAV,GAAmB,IAAnB;AACD,CAJD,EAIG,UAAS,GAAT,EAAa,CAAE,CAJlB,EAIoB,UAAS,GAAT,EAAa;AAAC,UAAQ,GAAR,CAAa,mBAAb;AAAoC,CAJtE;;;ACfA,IAAM,YAAY,KAAK,WAAL,CAAiB;AACjC,cAAS;AACP,cAAM,8BADC;AAEP,iBAAS;AAFF,KADwB;;AAMjC,cAAU,EANuB;;AASjC,UAAM,GAT2B;;AAWjC,SAAK;AACD,WAAG,IADF;AAED,WAAG,IAFF;AAGD,WAAG;AAHF,KAX4B;;AAiBjC,cAAU;AACN,WAAG,CADG;AAEN,WAAG,CAFG;AAGN,WAAG;AAHG,KAjBuB;;AAuBjC,WAAO;AACH,WAAG,GADA;AAEH,WAAG,GAFA;AAGH,WAAG;AAHA;AAvB0B,CAAjB,CAAlB;;AA+BA,UAAU,KAAV,CAAgB,IAAhB,EAAsB,MAAtB,EAA8B,IAA9B,CAAmC,YAAY;;AAE3C,SAAK,aAAL,CAAoB,SAApB,EAA+B;AAC3B,eAAO,SAAS,cAAT,CAAwB,SAAxB,CADoB;AAE3B,eAAO,CAFoB;AAG3B,cAAM;AAHqB,KAA/B;AAMH,CARD;;;AChCA,IAAM,MAAM,KAAK,OAAL,CAAa;AACvB,OAAK,QADkB;AAEvB,QAAM,CAFiB;AAGvB,OAAK;AAHkB,CAAb,CAAZ;;;ACAA,IAAI,UAAU,KAAK,YAAL,CAAkB;AAC9B,WAAO;AACL,eAAO,QADF;AAEL,mBAAW,GAFN;;AAIL,aAAK;AACD,eAAG,CADF;AAED,eAAG,GAFF;AAGD,eAAG;AAHF,SAJA;;AAUL,gBAAQ;AACJ,eAAG,CADC;AAEJ,eAAG,CAFC;AAGJ,eAAG;AAHC;AAVH;AADuB,CAAlB,CAAd;;AAmBA,IAAI,OAAO,KAAK,gBAAL,CAAuB;AAC9B,WAAO;AACH,eAAO,QADJ;AAEH,mBAAW,GAFR;AAGH,kBAAU;AAHP,KADuB;;AAO9B,SAAK;AACD,WAAG,GADF;AAED,WAAG,GAFF;AAGD,WAAG,GAHF,EAPyB;;;AAa9B,YAAQ;AACJ,WAAG,GADC;AAEJ,WAAG,GAFC;AAGJ,WAAG;AAHC;AAbsB,CAAvB,CAAX;;;ACnBA,IAAI,aAAa,IAAI,GAAJ,CAAQ,OAAR,CAAgB,yBAAhB,CAAjB;AACA,IAAI,iBAAiB,IAAI,GAAJ,CAAQ,OAAR,CAAgB,6BAAhB,CAArB;;AAEA,IAAI,cAAc;AAChB,OAAK,IAAI,GAAJ,CAAQ,OAAR,CAAgB,0BAAhB,CADW;AAEhB,QAAM,IAAI,GAAJ,CAAQ,OAAR,CAAgB,6BAAhB;AAFU,CAAlB;;AAKA,IAAI,gBAAgB;AAClB,OAAK,IAAI,GAAJ,CAAQ,OAAR,CAAgB,+BAAhB,CADa;AAElB,QAAM,IAAI,GAAJ,CAAQ,OAAR,CAAgB,qCAAhB,CAFY;AAGlB,eAAa,IAAI,GAAJ,CAAQ,OAAR,CAAgB,uCAAhB;AAHK,CAApB;;AAMA,IAAM,SAAS,KAAK,KAAL,CAAW;AACxB,YAAS;AACP,UAAM;AADC,GADe;;AAKxB,YAAU;AACR,aAAS,MAAM,aADP;AAER,eAAU,CAFF;AAGR,SAAK,UAHG;AAIR,aAAS,UAJD;AAKR,UAAM,OALE;AAMR,eAAU,KANF;AAOR,kBAAa,KAPL;AAQR,iBAAY,IARJ;AASR,gBAAW,IATH;AAUR,cAAU,QAVF;AAWR,uBAAmB,GAXX;AAYR,eAAW;AAZH,GALc;;AAoBxB,QAAM,CApBkB;AAqBxB,OAAK;AACD,OAAG,CADF;AAED,OAAG,CAFF;AAGD,OAAG;AAHF,GArBmB;;AA2BxB,SAAO;AACH,OAAG,GADA;AAEH,OAAG,GAFA;AAGH,OAAG;AAHA;AA3BiB,CAAX,CAAf;;AAmCA,IAAI,UAAU,KAAK,KAAL,CAAW;AACvB,YAAS;AACP,UAAM;AADC,GADc;;AAKvB,YAAU;AACR,aAAS,MAAM,aADP;AAER,eAAU,CAFF;AAGR,SAAK,cAHG;AAIR,aAAS,cAJD;AAKR,UAAM,OALE;AAMR,eAAU,KANF;AAOR,kBAAa,KAPL;AAQR,iBAAY,IARJ;AASR,gBAAW,IATH;AAUR,cAAU,QAVF;AAWR,uBAAmB,GAXX;AAYR,eAAW;;AAZH,GALa;;AAqBvB,QAAM,CArBiB;AAsBvB,OAAK;AACD,OAAG,IADF;AAED,OAAG,GAFF;AAGD,OAAG;AAHF,GAtBkB;;AA4BvB,SAAO;AACH,OAAG,GADA;AAEH,OAAG,GAFA;AAGH,OAAG;AAHA;AA5BgB,CAAX,CAAd;;AAmCA,IAAI,OAAO,KAAK,KAAL,CAAW;AACpB,YAAS;AACP,UAAM;AADC,GADW;;AAKpB,YAAU;AACR,aAAS,MAAM,aADP;AAER,eAAU,CAFF;AAGR,SAAK,YAAY,GAHT;AAIR,aAAS,YAAY,IAJb;AAKR,UAAM,OALE;AAMR,eAAU,KANF;AAOR,kBAAa,KAPL;AAQR,iBAAY,IARJ;AASR,gBAAW,IATH;AAUR,cAAU,QAVF;AAWR,uBAAmB,GAXX;AAYR,eAAW;AAZH,GALU;;AAoBpB,QAAM,CApBc;AAqBpB,OAAK;AACD,OAAG,CAAC,GADH;AAED,OAAG,CAAC,IAFH;AAGD,OAAG,CAAC;AAHH,GArBe;;AA2BpB,SAAO;AACH,OAAG,GADA;AAEH,OAAG,GAFA;AAGH,OAAG;AAHA;AA3Ba,CAAX,CAAX;;AAkCA,IAAI,SAAS,IAAI,IAAI,KAAR,CAAc;AACzB,YAAS;AACP,UAAM;AADC,GADgB;;AAKzB,YAAU;AACR,aAAS,MAAM,aADP;AAER,eAAU,CAFF;AAGR,SAAK,cAAc,GAHX;AAIR,aAAS,cAAc,GAJf;AAKR,UAAM,OALE;AAMR,eAAU,KANF;AAOR,kBAAa,KAPL;AAQR,iBAAY,IARJ;AASR,gBAAW,IATH;AAUR,cAAU,QAVF;AAWR,uBAAmB,GAXX;AAYR,eAAW;AAZH,GALe;;AAoBzB,QAAM,CApBmB;AAqBzB,OAAK;AACD,OAAG,CAAC,GADH;AAED,OAAG,CAAC,IAFH;AAGD,OAAG;AAHF,GArBoB;;AA2BzB,SAAO;AACH,OAAG,EADA;AAEH,OAAG,EAFA;AAGH,OAAG;AAHA;AA3BkB,CAAd,CAAb;;AAkCA,IAAI,YAAY,IAAI,IAAI,IAAR,CAAa,UAAW,KAAX,EAAmB;AAC5C,SAAO,QAAP,CAAgB,CAAhB,GAAqB,MAAM,cAAN,KAAyB,IAA1B,GAAkC,KAAlC,GAA0C,KAAK,EAA/C,GAAkD,CAAtE;AACH,CAFe,CAAhB;;AAKA,IAAI,gBAAgB,IAAI,IAAI,IAAR,CAAa,UAAS,KAAT,EAAe;AAC5C,MAAI,SAAU,MAAM,cAAN,KAAyB,IAA1B,GAAkC,KAAlC,GAA0C,KAAK,EAA/C,GAAkD,CAA/D;AACA,UAAQ,QAAR,CAAiB,CAAjB,GAAqB,MAArB;AACA,UAAQ,QAAR,CAAiB,CAAjB,GAAqB,MAArB;AACH,CAJmB,CAApB;;AAMA,IAAI,aAAa,IAAI,IAAI,IAAR,CAAa,UAAS,KAAT,EAAe;AACzC,MAAI,SAAU,MAAM,cAAN,KAAyB,IAA1B,GAAkC,KAAlC,GAA0C,KAAK,EAA/C,GAAkD,CAA/D;AACA,OAAK,QAAL,CAAc,CAAd,GAAkB,MAAlB;AACH,CAHgB,CAAjB;AAIA,UAAU,KAAV;AACA,cAAc,KAAd;AACA,WAAW,KAAX;ACzKA;;;ACAA,KAAK,MAAL,GAAc,KAAK,MAAL,CAAa;AACvB,UAAM,WADiB;AAEvB,eAAW,MAFY;AAGvB,aAAS,QAHc;AAIvB,YAAQ;AAJe,CAAb,CAAd","file":"game.js","sourcesContent":["const PI_2 = Math.PI/2;\n\nWHS.World.prototype.SpaceControls = function(object, params={}) {\n    'use strict';\n\n    let target = WHS.API.extend(params, {\n      block: document.getElementById('blocker'),\n      spedd: 1,\n      ypos: 5\n    });\n\n    this.controls = new (function(camera,  mesh, parms){\n      let inputVelocity = new THREE.Vector3(),\n          euler = new THREE.Euler();\n\n      let speedFactor = 1.0,\n          rollSpeed = 0.005;\n\n      let quat = new THREE.Quaternion(),\n          moveState = { left: false, right: false, forward: false, back: false,\n                        pitch: 0, yaw: 0, roll:0},\n          moveVector = new THREE.Vector3(0, 0, 0),\n          rotationVector = new THREE.Vector3(0, 0, 0),\n          canJump = false;\n\n      mesh.setAngularFactor({x: 0, y: 0, z: 0});\n\n      let scope = this,\n          player = mesh,\n          pitchObject = new THREE.Object3D(),\n          yawObject = new THREE.Object3D();\n\n      mesh.position.z -= 10;\n\n      camera.add(mesh);\n      pitchObject.add( camera.getNative() );\n\n      yawObject.position.y = params.ypos; // eyes are 2 meters above the ground\n      yawObject.add( pitchObject );\n\n      function onMouseMove ( event ) {\n        if ( scope.enabled === false ) return;\n\n        let movementX = event.movementX || event.mozMovementX || event.getMovementX() || 0,\n            movementY = event.movementY || event.mozMovementY || event.getMovementY() || 0;\n\n        yawObject.rotation.y -= movementX * 0.002;\n        pitchObject.rotation.x -= movementY * 0.002;\n      }\n\n      function onKeyDown ( event ) {\n        switch ( event.keyCode ) {\n          case 38: // up\n          case 87: // w\n            moveState.forward = true;\n            break;\n\n          case 37: // left\n          case 65: // a\n            moveState.left = true;\n            break;\n\n          case 40: // down\n          case 83: // s\n            moveState.back = true;\n            break;\n\n          case 39: // right\n          case 68: // d\n            moveState.right = true;\n            break;\n\n          case 32: // space\n            if ( canJump ){\n              player.applyCentralImpulse({x: 0, y: 0, z: -300});\n            }\n            canJump = false;\n          break;\n\n          case 16: // shift\n            addedSpeed = 0.5;\n            break;\n\n          case 81:\n            moveState.roll = -1;\n            break;\n\n          case 69:\n            moveState.roll = 1;\n            break;\n        }\n      }\n\n      function onKeyUp ( event ) {\n        switch( event.keyCode ) {\n\n          case 38: // up\n          case 87: // w\n            moveState.forward = false;\n            break;\n\n          case 37: // left\n          case 65: // a\n            moveState.left = false;\n            break;\n\n          case 40: // down\n          case 83: // a\n            moveState.back = false;\n            break;\n\n          case 39: // right\n          case 68: // d\n            moveState.right = false;\n            break;\n\n          case 16: // shift\n            speedFactor = 0.25;\n            break;\n\n          case 81:\n          case 69:\n            moveState.roll = 0;\n            break;\n        }\n      }\n\n      this.getObject = function () {\n        return yawObject;\n      };\n\n      this.getDirection = function(targetVec){\n        targetVec.set(0,0,-1);\n        quat.multiplyVector3(targetVec);\n      };\n\n      this.update = function(delta) {\n        let moveVec = new THREE.Vector3();\n\n        if ( scope.enabled === false ) return;\n\n        inputVelocity.set(0,0,0);\n        moveState.roll = moveState.roll * PI_2 / 2;\n        delta = delta || 0.5;\n        delta = Math.min(delta, 0.5);\n\n        var speed = delta * speedFactor * params.speed;\n        var rotMult = delta * rollSpeed;\n\n        if(moveState.forward){\n          inputVelocity.z = -speed;\n        }\n\n        if(moveState.back){\n          inputVelocity.z = speed;\n        }\n\n        if(moveState.left){\n          inputVelocity.x = -speed;\n        }\n\n        if(moveState.right){\n          inputVelocity.x = speed;\n        }\n\n        euler.x = pitchObject.rotation.x;\n        euler.y = yawObject.rotation.y;\n        euler.order = \"XYZ\";\n\n        quat.setFromEuler(euler);\n\n        inputVelocity.applyQuaternion(quat);\n\n        player.applyCentralImpulse({\n           x: inputVelocity.x * 10,\n           y: inputVelocity.y * 10,\n           z: inputVelocity.z * 10\n        });\n\n        yawObject.position.copy(player.position);\n    };\n\n    document.body.addEventListener( 'mousemove', onMouseMove, false );\n    document.body.addEventListener( 'keydown', onKeyDown, false );\n    document.body.addEventListener( 'keyup', onKeyUp, false );\n\n    })(this.getCamera(), object.getNative(), target);\n\n    let controls = this.controls;\n\n    this.getScene().add( this.controls.getObject() );\n\n    if ('pointerLockElement' in document ||\n        'mozPointerLockElement' in document ||\n        'webkitPointerLockElement' in document) {\n\n          var element = document.body;\n\n          this.pointerlockchange = function() {\n            if (document.pointerLockElement === element ||\n                document.mozPointerLockElement === element ||\n                document.webkitPointerLockElement === element ) {\n\n                controls.enabled = true;\n                target.block.fadeOut();\n\n            }\n            else {\n\n              controls.enabled = false;\n\n              target.block.fadeIn();\n            }\n\n          };\n\n    }\n    else {\n      console.warn(\"Your browser does not support the PointerLock WHS.API.\");\n    }\n\n    document.addEventListener('pointerlockchange', this.pointerlockchange, false);\n    document.addEventListener('mozpointerlockchange', this.pointerlockchange, false);\n    document.addEventListener('webkitpointerlockchange', this.pointerlockchange, false);\n\n    this.pointerlockerror = function() {\n      console.warn(\"Pointer lock error.\");\n    };\n\n    document.addEventListener('pointerlockerror', this.pointerlockerror, false);\n    document.addEventListener('mozpointerlockerror', this.pointerlockerror, false);\n    document.addEventListener('webkitpointerlockerror', this.pointerlockerror, false);\n\n    target.block.addEventListener('click', function() {\n\n      element.requestPointerLock = element.requestPointerLock ||\n                                   element.mozRequestPointerLock ||\n                                   element.webkitRequestPointerLock;\n\n      element.requestFullscreen = element.requestFullscreen ||\n                                  element.mozRequestFullscreen ||\n                                  element.mozRequestFullScreen ||\n                                  element.webkitRequestFullscreen;\n      if (/Firefox/i.test(navigator.userAgent)) {\n\n        var fullscreenchange = function() {\n            if (document.fullscreenElement === element ||\n                document.mozFullscreenElement === element ||\n                document.mozFullScreenElement === element) {\n\n                    document.removeEventListener('fullscreenchange', fullscreenchange);\n                    document.removeEventListener('mozfullscreenchange', fullscreenchange);\n                    element.requestPointerLock();\n            }\n        };\n\n        document.addEventListener('fullscreenchange', fullscreenchange, false);\n        document.addEventListener('mozfullscreenchange', fullscreenchange, false);\n\n        element.requestFullscreen();\n\n      }\n      else{\n        element.requestPointerLock();\n      }\n  });\n};\n","const preloader = Preloader();\n\nconst game = new WHS.World({\n  stats: false,\n  autoresize: true,\n\n  gravity: {\n    x: 0,\n    y: 0,\n    z: 0\n  },\n\n  camera: {\n    far: 10000,\n    aspect: 35\n  },\n\n  shadowmap: {\n      type: THREE.PCFShadowMap\n  },\n\n  rWidth: 1,\n  rHeight: 1,\n\n  background: 0x1E2F40,\n\n  path_worker: '../src/scripts/vendor/physijs_worker.js',\n\n  path_ammo: 'ammo.js'\n});\n\ngame.start();\n\nlet camera = game.getCamera();\n\n\npreloader.check();\n","const track = new THREE.AudioListener();\nconst soundtrack = new THREE.Audio(track);\nconst shipSound = new THREE.Audio(track);\nconst camera = game.getCamera();\nconst loader = new THREE.AudioLoader();\n\ncamera.add(track);\n\ngame.add(soundtrack);\n\nloader.load('assets/audio/365-days-in-space.ogg',\n function(audioBuffer){\n  soundtrack.setBuffer( audioBuffer );\n\tsoundtrack.play();\n}, function(xhr){}, function(xhr){console.log( 'An error happened' );});\n\nloader.load('assets/audio/flyby.ogg',\nfunction(audioBuffer){\n  shipSound.setBuffer(audioBuffer);\n  shipSound.loaded = true;\n}, function(xhr){}, function(xhr){console.log( 'An error happened' );});\n","\nconst spaceship = game.ConvexModel({\n  geometry:{\n    path: 'assets/models/spaceship.json',\n    physics: 'assets/models/spaceship_low.json'\n  },\n\n  material: {\n  },\n\n  mass: 100,\n\n  pos: {\n      x: 1000,\n      y: 1000,\n      z: 1000\n  },\n\n  rotation: {\n      x: 0,\n      y: 0,\n      z: 0\n  },\n\n  scale: {\n      x: 0.5,\n      y: 0.5,\n      z: 0.5\n  },\n});\n\n\nspaceship.addTo(game, \"wait\").then(function () {\n\n    game.SpaceControls( spaceship, {\n        block: document.getElementById('blocker'),\n        speed: 1,\n        ypos: 3 // 5\n    } );\n\n});\n","const fog = game.FogExp2({\n  hex: 0x25424d,\n  near: 1,\n  far: 5\n});\n","let ambient = game.AmbientLight({\n  light: {\n    color: 0x83DCF9,\n    intensity: 0.2,\n\n    pos: {\n        x: 0,\n        y: 120,\n        z: 0,\n    },\n\n    target: {\n        x: 0,\n        y: 0,\n        z: 0\n    }\n  }\n});\n\nlet spot = game.DirectionalLight( {\n    light: {\n        color: 0xffffff,\n        intensity: 0.1,\n        distance: 50,\n    },\n\n    pos: {\n        x: 600, // 100,\n        y: 600, // 30,\n        z: 600, // 100\n    },\n\n    target: {\n        x: 450,\n        y: 450,\n        z: 450\n    }\n} );\n","let sunTexture = WHS.API.texture('assets/textures/sun.jpg');\nlet jupiterTexture = WHS.API.texture('assets/textures/jupiter.jpg');\n\nlet marsTexture = {\n  map: WHS.API.texture('assets/textures/mars.jpg'),\n  bump: WHS.API.texture('assets/textures/marsmap.jpg')\n};\n\nlet saturnTexture = {\n  map: WHS.API.texture('assets/textures/saturnmap.jpg'),\n  ring: WHS.API.texture('assets/textures/saturnringcolor.jpg'),\n  ringPattern: WHS.API.texture('assets/textures/saturnringpattern.jpg')\n};\n\nconst theSun = game.Model({\n  geometry:{\n    path: 'assets/models/ik89123.json'\n  },\n\n  material: {\n    shading: THREE.SmoothShading,\n    shininess:0,\n    map: sunTexture,\n    bumpMap: sunTexture,\n    kind: 'phong',\n    wireframe:false,\n    vertexColors:false,\n    doubleSided:true,\n    depthWrite:true,\n    emissive: 0xeffe75,\n    emissiveIntensity: 0.8,\n    bumpScale: 0.05\n  },\n\n  mass: 0,\n  pos: {\n      x: 0,\n      y: 0,\n      z: 0\n  },\n\n  scale: {\n      x: 500,\n      y: 500,\n      z: 500\n  },\n});\n\n\nlet jupiter = game.Model({\n  geometry:{\n    path: 'assets/models/ik89123.json'\n  },\n\n  material: {\n    shading: THREE.SmoothShading,\n    shininess:0,\n    map: jupiterTexture,\n    bumpMap: jupiterTexture,\n    kind: 'phong',\n    wireframe:false,\n    vertexColors:false,\n    doubleSided:true,\n    depthWrite:true,\n    emissive: 0xde9fa3,\n    emissiveIntensity: 0.1,\n    bumpScale: 0.05\n\n  },\n\n  mass: 0,\n  pos: {\n      x: 1000,\n      y: 650,\n      z: 120\n  },\n\n  scale: {\n      x: 100,\n      y: 100,\n      z: 100\n  }\n});\n\nlet mars = game.Model({\n  geometry:{\n    path: 'assets/models/ik89123.json'\n  },\n\n  material: {\n    shading: THREE.SmoothShading,\n    shininess:0,\n    map: marsTexture.map,\n    bumpMap: marsTexture.bump,\n    kind: 'phong',\n    wireframe:false,\n    vertexColors:false,\n    doubleSided:true,\n    depthWrite:true,\n    emissive: 0xde9fa3,\n    emissiveIntensity: 0.1,\n    bumpScale: 0.05\n  },\n\n  mass: 0,\n  pos: {\n      x: -650,\n      y: -1050,\n      z: -1000\n  },\n\n  scale: {\n      x: 101,\n      y: 101,\n      z: 101\n  }\n});\n\nlet saturn = new WHS.Model({\n  geometry:{\n    path: 'assets/models/ik89123.json'\n  },\n\n  material: {\n    shading: THREE.SmoothShading,\n    shininess:0,\n    map: saturnTexture.map,\n    bumpMap: saturnTexture.map,\n    kind: 'phong',\n    wireframe:false,\n    vertexColors:false,\n    doubleSided:true,\n    depthWrite:true,\n    emissive: 0xde9fa3,\n    emissiveIntensity: 0.1,\n    bumpScale: 0.05\n  },\n\n  mass: 0,\n  pos: {\n      x: -650,\n      y: -2000,\n      z: 375\n  },\n\n  scale: {\n      x: 20,\n      y: 20,\n      z: 20\n  }\n});\n\nvar rotateSun = new WHS.loop(function ( clock ) {\n    theSun.rotation.x = (clock.getElapsedTime() * 1000) / 50000 * Math.PI*2;\n});\n\n\nvar rotateJupiter = new WHS.loop(function(clock){\n    var factor = (clock.getElapsedTime() * 1000) / 70000 * Math.PI*2;\n    jupiter.rotation.x = factor;\n    jupiter.rotation.y = factor;\n});\n\nvar rotateMars = new WHS.loop(function(clock){\n    var factor = (clock.getElapsedTime() * 1000) / 60000 * Math.PI*2;\n    mars.rotation.z = factor;\n});\nrotateSun.start();\nrotateJupiter.start();\nrotateMars.start();\n",null,"game.skybox = game.Skybox( {\n    path: \"img/space\",\n    imgSuffix: \".jpg\",\n    skyType: \"sphere\",\n    radius: 10000\n} );\n"]}